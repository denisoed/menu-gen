# Spec-flow

Spec-flow — это последовательный процесс подготовки и сопровождения фичи: от формулирования бизнес-контекста до проверки выполненных задач. Он помогает синхронизировать продуктовую, инженерную и QA-команды, уменьшить количество изменений «на лету» и зафиксировать критерии успешности до начала разработки. Все артефакты генерируются LLM на основе единого входного контекста.

## Структура каталога `/spec`

```
/spec
├── README.md             ← это руководство
├── feature.md            ← основной шаблон, который запускает spec-flow
├── core                  ← базовые шаблоны для частных этапов
│   ├── spec.md           ← структура спецификации
│   ├── plan.md           ← структура технического плана
│   ├── tasks.md          ← структура списка задач
│   ├── verify.md         ← структура отчёта проверки
│   └── hotfix.md         ← структура хотфикса и актуализации артефактов
└── features              ← каталог с материалами фич
    ├── <feature>         ← папка конкретной фичи (например, `floating-cart`)
    │   ├── spec.md       ← актуальная спецификация
    │   ├── plan.md       ← технический план
    │   ├── tasks.md      ← чек-лист реализации
    │   └── verify-report.md (опционально) — журнал проверок
    └── ...               ← другие фичи, созданные по шаблонам
```

## Как работает единый шаблон `feature.md`

`feature.md` инкапсулирует типовой сценарий spec-flow: он создаёт спецификацию, план и список задач за один запрос. Шаблоны из каталога `core` остаются источником структуры и правил для отдельных документов и используются системой для генерации артефактов. Результаты сохраняются в подкаталог `features/<feature>`, при необходимости дополняются отчётами проверок и обновляются хотфиксами.

## Формат входных параметров

Передавай параметры одной строкой в формате `@<feature>@ <контекст>`:

- значение между первыми двумя символами `@` используется как **FEATURE** и определяет папку фичи (`@payments@` → `spec/features/payments`);
- всё, что следует после второго `@`, — это **CONTEXT**. Оно может занимать несколько строк, включать списки, ссылки и дополнительные пояснения.

## Пример

Используйте любой AI Ассистент, который умеет создавать папки и файлы, например: Claude Code, Gemini CLI, Codex CLI, Copilot, Cursor и тд.

1. **Промпт**
   ```
   Используй шаблон из spec/feature.md.
   @<feature>@ <контекст>
   ```
2. **Что происходит дальше**
   AI ассистент генерирует три Markdown-документа подряд:
   - `spec/features/{FEATURE}/spec.md` — спецификация, описывающая ценность и пользовательские сценарии.
   - `spec/features/{FEATURE}/plan.md` — технический план, опирающийся на спецификацию и контекст.
   - `spec/features/{FEATURE}/tasks.md` — чек-лист задач на реализацию и тестирование.
3. Каждый документ начинается с комментария `<!-- SAVE_AS: ... -->`, что позволяет автоматически сохранить файлы в нужную папку.

## Что происходит после выполнения задач

- Когда AI ассистент выполняет все задачи из `tasks.md`, автоматически запускается проверка через шаблон `spec/core/verify.md`.
- Проверка формирует отчёт `verify-report.md`, обновляет чекбоксы в `tasks.md` и фиксирует несоответствия.

## Обновление существующей фичи

- Нужно повторно вызвать `spec/feature.md`указав название папки этой фичи и список изменений. AI ассистент корректно перезапишет `spec.md`, `plan.md` и `tasks.md`, сохранив структуру и актуализировав содержание.
