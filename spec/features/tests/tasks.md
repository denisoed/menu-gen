<!-- SAVE_AS: spec/features/tests/tasks.md -->

# Задачи

**Контекст:** Установить и настроить Jest и Istanbul для проекта, добавить конфигурационные файлы и обеспечить отображение покрытия кода в pull request.

## Основные направления

### Настройка тестового окружения

- [ ] Добавить в `package.json` и установить зависимости для Jest, `@vue/test-utils`, `vue-jest`, `ts-jest`, плагинов для работы с Vite/Tailwind и типов TypeScript; проверить, что `npm install` завершает установку без ошибок.
- [ ] Создать или обновить конфигурацию Jest (отдельный `jest.config.ts/js` и маппинг в `package.json`) с поддержкой Vue 3, алиасов Vite и мока статических ресурсов; убедиться, что пробный компонентный тест проходит командой `npm run test`.
- [ ] Настроить базовую структуру тестов (папки, примеры) и добавить минимум один эталонный тест для существующего компонента, чтобы показать готовность окружения; убедиться, что тесты воспроизводимы локально и в CI (Node 18+).

### Покрытие и пороги качества

- [ ] Включить Istanbul в конфигурации Jest (опции `collectCoverage`, `coverageDirectory`, `coverageReporters`, `coveragePathIgnorePatterns`) и определить пороги `coverageThreshold` (≥80% строк, ≥70% ветвлений); проверить, что `npm run test -- --coverage` генерирует отчёт и падает при заниженном покрытии.
- [ ] Обеспечить сохранение артефактов покрытия (HTML, LCOV) в каталоге `coverage/` и добавить соответствующие записи в `.gitignore`; подтвердить, что отчёты корректно формируются и доступны для просмотра локально.

### Интеграция с CI и pull request

- [ ] Создать workflow GitHub Actions, запускающийся на `pull_request` и `push`, который устанавливает зависимости, выполняет линт/тесты и формирует покрытие; убедиться, что шаг `npm run test -- --coverage` проходит на чистом окружении.
- [ ] Добавить в workflow публикацию артефактов покрытия и краткую сводку (через `actions/upload-artifact` и `actions/github-script` или аналог) со статистикой statements/branches/functions/lines прямо в вывод job; протестировать отображение summary в эмуляции (`act` или тестовый PR) либо через `workflow_dispatch`.
- [ ] Настроить отображение суммарного покрытия в комментарии/статусе PR (например, `actions/github-script` или сторонний action) и убедиться, что падение ниже порога переводит проверку в статус failure.

## Поддерживающие задачи

- [ ] Документация: обновить README или отдельный гайд с инструкциями по запуску Jest, работе с покрытием и анализу отчётов.
- [ ] Наблюдаемость: добавить или уточнить метрики, алерты и/или логирование (для данной задачи — указать, как мониторить стабильность тестов и покрытие через CI-отчёты).
- [ ] Code review и PR: подготовить изменения к ревью и сопроводительную информацию.

## Definition of Done

- Все задачи выполнены и протестированы.
- Релевантные unit/e2e/интеграционные тесты проходят успешно.
- Документация и операционные инструкции обновлены.
