<!-- SAVE_AS: spec/features/menu-page/plan.md -->

# План реализации

**План:** настроить маршрут `/:uuid` с загрузкой тестовых данных из json, разбить страницу меню на независимые компоненты (баннер-карусель, фильтры, карточки блюд), внедрить стор и локализацию, обеспечить адаптивность и поддержку смены темы в минималистичном оформлении.

## Источники данных / схемы

- Создать каталог с фикстурами, например `src/data/menus`, и хранить тестовые данные заведений в отдельных JSON-файлах по `uuid`. Структура записей использует только `uuid` (без `id`) как идентификатор блюда и заведения вместе с `name`, `description`, `image`, `price`, `isPopular`, `category`, `availability`.
- Подготовить типы TypeScript для блюд, категорий и структуры меню; гарантировать, что необязательные поля (`ingredients`, `image`) обрабатываются безопасно.
- Настроить лёгкий слой загрузки данных: утилита для чтения JSON и маппинга в стор, чтобы впоследствии заменить на API без переписывания компонентов.

## Контракты и интерфейсы

- Определить интерфейс пропсов для страницы: ожидает `menuUuid: string` и данные меню из стора (через роут-параметр `uuid`).
- Сформировать контракты компонентов:
  - `BannerCarousel` принимает массив изображений.
  - `PopularCarousel` принимает список популярных блюд и события кликов по карточке.
  - `DishCard` принимает данные блюда, событие «Заказать», поддержку темы.
  - `CategoryFilter` и `SearchInput` возвращают выбранные значения через события/emit.
- Обозначить API стора: методы `loadMenu(menuUuid)`, геттеры отфильтрованных блюд, состояние фильтров.
- Настроить локализацию через существующую i18n-конфигурацию: добавить словари для текстов фильтров, заглушек и кнопок на RU/EN.

## Архитектура / Компоненты

- Добавить маршрут в Vue Router: динамический путь `/:uuid`, ленивый импорт страницы `MenuPage`.
- Создать страницу `MenuPage` как композиционный компонент: загрузка данных, привязка фильтров, отображение блоков, интеграция стора и темы.
- Установить и настроить плагин для карусели (например, Swiper или Embla) с минимальными контролами и адаптивными настройками.
- Организовать стор (Pinia или Vuex согласно проекту) с состояниями: `menu`, `filters`, `status`, `theme`. Реализовать вычисления для популярных блюд, списков категорий, отфильтрованных блюд.
- Разбить UI на атомарные компоненты: `MenuHeader`, `FiltersPanel`, `DishGrid`, `DishCard`, `EmptyState`. Обеспечить переиспользуемость и минималистичный стиль (использование Tailwind-токенов).
- Интегрировать переключатель темы (светлая/тёмная) и убедиться, что компоненты поддерживают Tailwind dark-модификаторы.
- Подключить адаптивные стили: карусели в свайп-режиме на мобильных, сетка блюд меняет колонки (1/2/4) в зависимости от ширины, фильтры складываются в аккордеон.

## Риски

- Плагин карусели может увеличить размер бандла; выбрать лёгкое решение и настроить tree-shaking.
- Несогласованность структуры JSON приведёт к ошибкам отображения; предусмотреть валидацию и заглушки.
- Темизация и локализация могут конфликтовать с существующей архитектурой, если глобальные стили не покрывают новые компоненты.
- При замене источника данных на API потребуется обработка задержек и ошибок; стоит заложить начальные состояния и индикаторы загрузки.

## Допущения

- В проекте используется Pinia и Vue i18n; если нет, потребуется их установка до реализации.
- Фикстуры достаточно лёгкие для загрузки на клиенте без SSR.
- Минималистичное оформление достигается Tailwind-настройками без привлечения дополнительного UI-кита.
- Переключение темы уже реализовано на уровне приложения; новая страница лишь подписывается на текущее состояние и не вводит собственный менеджер темы.
