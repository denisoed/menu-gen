<!-- SAVE_AS: spec/features/carousel-scroll-lock/spec.md -->

# Блокировка вертикального скролла при свайпе карусели

**Спецификация:** При горизонтальном свайпе карточек в `vue3-carousel` вертикальный скролл страницы срабатывает вместе со слайдами. Необходимо обеспечить, чтобы жесты внутри карусели переключали только слайды, не влияя на прокрутку страницы, сохраняя поддержку мобильных браузеров, тачпадов и клавиатурной навигации.

## User Stories

- Как посетитель мобильной версии меню, я хочу листать карточки карусели горизонтальным свайпом без смещения страницы, чтобы не терять контекст.
- Как пользователь планшета/ноутбука с тачпадом, я хочу, чтобы диагональные жесты с преобладанием горизонтали переключали слайды и не инициировали вертикальный скролл.
- Как разработчик, я хочу использовать штатные настройки `vue3-carousel`, если они позволяют ограничить вертикальный скролл, чтобы минимизировать кастомный код и риск регрессий.
- Как менеджер продукта, я хочу, чтобы любое изменение оставалось совместимым с SSR/Vite, не ухудшало доступность и покрывалось тестами.

## Основные сценарии и правила

- Горизонтальные свайпы внутри карусели приводят к переключению на соседний слайд без вертикального смещения страницы.
- Вертикальные движения (или диагональные с преобладанием вертикали) должны продолжать скроллить страницу; блокировка применяется только при явном горизонтальном свайпе.
- Нужно проверить документацию `vue3-carousel`: если существует опция (`touchDrag`, `mouseDrag`, `preventExcessiveDragging`, `touch-action` и т.п.), позволяющая ограничить вертикальные жесты, использовать её прежде чем добавлять собственные обработчики.
- При отсутствии подходящей опции реализовать кастомную обработку pointer/touch событий с определением направления, вызовом `preventDefault()` и `stopPropagation()` при горизонтальном свайпе.
- Обработчики должны корректно подключаться/отключаться при монтировании/демонтаже компонента и учитывать SSR (использовать доступ к `window`/`document` только после монтирования).
- Управление с клавиатуры (`Tab`, стрелки) и кнопками навигации (`Navigation` слот) не должно измениться.
- При отключённом touch/pointer API карусель должна вести себя как сейчас, без ошибок в консоли.

## Нефункциональные требования

- Поддержка мобильных браузеров: iOS Safari 15+, Chrome/Edge/Firefox Android 11+, десктопные браузеры с pointer events.
- Производительность: обработка жестов не должна вызывать фризы; использовать пассивные слушатели по умолчанию и переключать на `{ passive: false }` только там, где требуется `preventDefault()`.
- Доступность: взаимодействие через клавиатуру и скринридеры остаётся доступным; aria-атрибуты карусели не меняются.
- Тестирование: покрыть ключевые сценарии юнит/компонентными тестами и описать ручные проверки на реальных устройствах.
- Документация: задокументировать выбранный подход и упомянуть использованные настройки плагина.

## Assumptions

- Карусель реализована компонентами `BannerCarousel.vue` и `PopularCarousel.vue`, использующими `vue3-carousel`.
- Верстка и данные карточек не требуют изменений; задача ограничена поведением ввода.
- Поддерживается доступ к файлам плагина и официальной документации для изучения доступных опций.
- Новые зависимости не требуются; достаточно встроенных возможностей и CSS (`touch-action`).
